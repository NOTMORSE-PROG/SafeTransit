// Gradle init script to fix Maven Central 403 rate limiting on GitHub Actions
// This script adds Google's Maven Central mirror before Maven Central for all repositories

gradle.allprojects { project ->
    project.buildscript {
        repositories {
            google()
            maven { url 'https://maven-central.storage-download.googleapis.com/maven2/' }
            mavenCentral()
            gradlePluginPortal()
        }
    }
    project.repositories {
        google()
        maven { url 'https://maven-central.storage-download.googleapis.com/maven2/' }
        mavenCentral()
        maven { url 'https://www.jitpack.io' }
    }
}

gradle.settingsEvaluated { settings ->
    settings.pluginManagement {
        repositories {
            google()
            maven { url 'https://maven-central.storage-download.googleapis.com/maven2/' }
            mavenCentral()
            gradlePluginPortal()
        }
    }
    settings.dependencyResolutionManagement {
        repositories {
            google()
            maven { url 'https://maven-central.storage-download.googleapis.com/maven2/' }
            mavenCentral()
            maven { url 'https://www.jitpack.io' }
        }
    }
}
